{"ast":null,"code":"var _jsxFileName = \"/Users/omprakashbagariya/Downloads/newsmania_ai/frontend/src/pages/NewsFeed.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useAuth } from '../utils/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND = process.env.REACT_APP_BACKEND;\nconst sources = ['toi', 'thehindu', 'ht', 'indianexpress'];\nexport default function NewsFeed() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const {\n    token\n  } = useAuth();\n  const fetchSource = async src => {\n    setLoading(true);\n    const res = await axios.get(`http://localhost:5001/api/news/${src}`);\n    setItems(res.data);\n    setLoading(false);\n  };\n  const getSummary = async item => {\n    try {\n      const res = await axios.post(`http://localhost:5001/api/summarize`, {\n        url: item.link,\n        title: item.title\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      return res.data.summary;\n    } catch (e) {\n      console.error(e);\n      return null;\n    }\n  };\n  const saveBookmark = async item => {\n    const summary = await getSummary(item);\n    await axios.post(`${BACKEND}/api/bookmarks`, {\n      title: item.title,\n      link: item.link,\n      summary,\n      source: item.source\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    alert('Bookmarked');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Smart News Aggregator\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 12\n      },\n      children: sources.map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          marginRight: 8\n        },\n        onClick: () => fetchSource(s),\n        children: s.toUpperCase()\n      }, s, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 26\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: {\n        marginTop: 12\n      },\n      children: items.map((it, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          padding: 10,\n          border: '1px solid #ddd',\n          marginBottom: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: it.link,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          style: {\n            fontWeight: 600\n          },\n          children: it.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => saveBookmark(it),\n            style: {\n              marginRight: 8\n            },\n            children: \"Bookmark\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SummaryInline, {\n            item: it,\n            token: token\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n_s(NewsFeed, \"IZ/L9jehT8eaWpKCj4X1nJQ8oSQ=\", false, function () {\n  return [useAuth];\n});\n_c = NewsFeed;\nfunction SummaryInline({\n  item,\n  token\n}) {\n  _s2();\n  const [summary, setSummary] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const fetchSummary = async () => {\n    setLoading(true);\n    try {\n      const res = await axios.post(`${process.env.REACT_APP_BACKEND}/api/summarize`, {\n        url: item.link,\n        title: item.title\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setSummary(res.data.summary);\n    } catch (e) {\n      console.error(e);\n    }\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: 8\n    },\n    children: summary ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 13\n      },\n      children: summary\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 18\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      style: {\n        color: '#2563eb'\n      },\n      onClick: fetchSummary,\n      children: loading ? 'Summarizing...' : 'Summarize'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 63\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s2(SummaryInline, \"uLYgjefSab1CEEyrxJOkLW40RXk=\");\n_c2 = SummaryInline;\nvar _c, _c2;\n$RefreshReg$(_c, \"NewsFeed\");\n$RefreshReg$(_c2, \"SummaryInline\");","map":{"version":3,"names":["React","useEffect","useState","axios","useAuth","jsxDEV","_jsxDEV","BACKEND","process","env","REACT_APP_BACKEND","sources","NewsFeed","_s","items","setItems","loading","setLoading","token","fetchSource","src","res","get","data","getSummary","item","post","url","link","title","headers","Authorization","summary","e","console","error","saveBookmark","source","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginTop","map","s","marginRight","onClick","toUpperCase","it","idx","padding","border","marginBottom","href","target","rel","fontWeight","SummaryInline","_c","_s2","setSummary","fetchSummary","fontSize","color","_c2","$RefreshReg$"],"sources":["/Users/omprakashbagariya/Downloads/newsmania_ai/frontend/src/pages/NewsFeed.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useAuth } from '../utils/auth';\n\nconst BACKEND = process.env.REACT_APP_BACKEND;\nconst sources = ['toi','thehindu','ht','indianexpress'];\n\nexport default function NewsFeed(){\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const { token } = useAuth();\n\n  const fetchSource = async (src) => {\n    setLoading(true);\n    const res = await axios.get(`http://localhost:5001/api/news/${src}`);\n    setItems(res.data);\n    setLoading(false);\n  };\n\n  const getSummary = async (item) => {\n    try{\n      const res = await axios.post(`http://localhost:5001/api/summarize`, { url: item.link, title: item.title }, { headers: { Authorization: `Bearer ${token}` } });\n      return res.data.summary;\n    }catch(e){ console.error(e); return null; }\n  };\n\n  const saveBookmark = async (item) => {\n    const summary = await getSummary(item);\n    await axios.post(`${BACKEND}/api/bookmarks`, { title:item.title, link:item.link, summary, source:item.source }, { headers:{ Authorization:`Bearer ${token}` } });\n    alert('Bookmarked');\n  };\n\n  return (\n    <div className=\"container\">\n      <h1>Smart News Aggregator</h1>\n      <div style={{marginTop:12}}>\n        {sources.map(s=> <button key={s} style={{marginRight:8}} onClick={()=>fetchSource(s)}>{s.toUpperCase()}</button>)}\n      </div>\n\n      {loading && <div>Loading...</div>}\n      <ul style={{marginTop:12}}>\n        {items.map((it,idx)=> (\n          <li key={idx} style={{padding:10, border:'1px solid #ddd', marginBottom:8}}>\n            <a href={it.link} target=\"_blank\" rel=\"noreferrer\" style={{fontWeight:600}}>{it.title}</a>\n            <div style={{marginTop:8}}>\n              <button onClick={()=>saveBookmark(it)} style={{marginRight:8}}>Bookmark</button>\n              <SummaryInline item={it} token={token} />\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nfunction SummaryInline({ item, token }){\n  const [summary, setSummary] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const fetchSummary = async () => {\n    setLoading(true);\n    try{\n      const res = await axios.post(`${process.env.REACT_APP_BACKEND}/api/summarize`, { url:item.link, title:item.title }, { headers:{ Authorization:`Bearer ${token}` } });\n      setSummary(res.data.summary);\n    }catch(e){ console.error(e); }\n    setLoading(false);\n  };\n\n  return (\n    <div style={{marginTop:8}}>\n      {summary ? <div style={{fontSize:13}}>{summary}</div> : <button style={{color:'#2563eb'}} onClick={fetchSummary}>{loading ? 'Summarizing...' : 'Summarize'}</button>}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}